<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>JS 科學模擬實驗室</title>
  <style>
    :root {
      --bg:#050608;
      --panel:#10141b;
      --muted:#a0a4ad;
      --text:#e5e7eb;
      --brand:#a5d68a;
      --brand-2:#8fc36f;
      --accent:#a5d68a;
    }
    body {
      margin:0;
      min-height:100vh;
      font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Noto Sans TC",sans-serif;
      background:
        radial-gradient(1200px 500px at 80% -50%, rgba(165,214,138,.22), transparent 60%),
        radial-gradient(900px 450px at -10% 0%, rgba(148,163,184,.18), transparent 60%),
        var(--bg);
      color:var(--text);
      display:flex;
      align-items:center;
      justify-content:center;
      padding:24px;
      box-sizing:border-box;
    }
    .shell {
      width:100%;
      max-width:1100px;
      background:linear-gradient(180deg,rgba(15,23,42,.96),rgba(3,7,18,.98));
      border-radius:24px;
      border:1px solid rgba(255,255,255,.08);
      box-shadow:0 22px 50px rgba(0,0,0,.7);
      padding:22px 22px 18px;
      display:flex;
      flex-direction:column;
      gap:18px;
    }
    header {
      display:flex;
      flex-wrap:wrap;
      gap:12px;
      justify-content:space-between;
      align-items:baseline;
    }
    h1 {
      margin:0;
      font-size:clamp(22px,3vw,26px);
      letter-spacing:.03em;
    }
    .tagline {
      margin:0;
      font-size:14px;
      color:var(--muted);
    }
    .badge {
      padding:4px 10px;
      border-radius:999px;
      border:1px solid rgba(165,214,138,.6);
      color:var(--accent);
      font-size:11px;
      text-transform:uppercase;
      letter-spacing:.14em;
      white-space:nowrap;
    }
    main {
      background:#050814;
      border-radius:18px;
      border:1px solid rgba(148,163,184,.22);
      padding:16px;
      display:grid;
      gap:16px;
    }
    @media(min-width:900px){
      main {
        grid-template-columns: minmax(0,1.2fr) minmax(0,1fr);
      }
    }
    .panel-title {
      font-size:15px;
      font-weight:600;
      margin-bottom:6px;
      color:#e5e7eb;
    }
    .panel-desc {
      font-size:13px;
      color:var(--muted);
      margin-bottom:10px;
    }
    .back-link {
      text-align:right;
      font-size:12px;
      color:var(--muted);
    }
    .back-link a {
      color:var(--accent);
      text-decoration:none;
    }
    .back-link a:hover {
      text-decoration:underline;
    }
    .pill {
      display:inline-flex;
      align-items:center;
      gap:6px;
      padding:4px 8px;
      border-radius:999px;
      border:1px solid rgba(148,163,184,.4);
      font-size:11px;
      color:var(--muted);
      margin-right:6px;
      margin-bottom:4px;
    }
  </style>
</head>
<body>
<div class="shell">
  <header>
    <div>
      <h1>JS 科學模擬實驗室</h1>
      <p class="tagline">用簡單的互動模型，讓抽象概念變得可見。</p>
    </div>
    <div class="badge">JS · Interactive Science</div>
  </header>
  <main>

    <section>
      <div class="panel-title">小型重力模擬</div>
      <p class="panel-desc">
        拖曳畫面中的小球，可以看到它在「虛構重力井」中的運動軌跡。
        這只是一個簡單的示意，實際課堂中可以換成你要的物理或科學模型。
      </p>
      <canvas id="gravityCanvas" style="width:100%;max-width:520px;height:260px;background:#020617;border-radius:12px;border:1px solid rgba(148,163,184,.35);cursor:grab;"></canvas>
      <p style="font-size:12px;color:var(--muted);margin-top:8px;">
        提示：用滑鼠拖曳小球試試。手機 / 平板用手指拖曳。
      </p>
    </section>
    <section>
      <div class="panel-title">可延伸方向</div>
      <p class="panel-desc">
        只要掌握「狀態＋每幀更新」的概念，就可以做出很多種科學實驗：
      </p>
      <ul style="font-size:13px;color:var(--muted);padding-left:20px;line-height:1.7;">
        <li>單擺、彈簧振盪、阻尼系統等力學。</li>
        <li>光線折射、反射路徑模擬。</li>
        <li>簡化版的粒子擴散、布朗運動等模型。</li>
      </ul>
      <div>
        <span class="pill">Canvas 互動</span>
        <span class="pill">適合自然科 / 物理課</span>
      </div>
    </section>

  </main>
  <div class="back-link">
    ⬅︎ <a href="../index.html">回入口 LAB ENTRANCE</a>
  </div>
</div>
</body>
</html>

<script>
(function(){
  const canvas = document.getElementById("gravityCanvas");
  if(!canvas) return;
  const ctx = canvas.getContext("2d");
  function resize(){
    const rect = canvas.getBoundingClientRect();
    canvas.width = rect.width * window.devicePixelRatio;
    canvas.height = rect.height * window.devicePixelRatio;
    ctx.setTransform(window.devicePixelRatio,0,0,window.devicePixelRatio,0,0);
  }
  resize();
  window.addEventListener("resize", resize);

  const center = { x: canvas.clientWidth/2, y: canvas.clientHeight/2 };
  let ball = { x: center.x + 120, y: center.y - 40, vx: 0, vy: 1 };
  let dragging = false;

  canvas.addEventListener("pointerdown", e=>{
    const rect = canvas.getBoundingClientRect();
    const x = e.clientX - rect.left;
    const y = e.clientY - rect.top;
    const dx = x - ball.x;
    const dy = y - ball.y;
    if(Math.hypot(dx,dy) < 16){
      dragging = true;
      canvas.setPointerCapture(e.pointerId);
    }
  });
  canvas.addEventListener("pointermove", e=>{
    if(!dragging) return;
    const rect = canvas.getBoundingClientRect();
    ball.x = e.clientX - rect.left;
    ball.y = e.clientY - rect.top;
    ball.vx = 0;
    ball.vy = 0;
  });
  canvas.addEventListener("pointerup", e=>{
    dragging = false;
    try{ canvas.releasePointerCapture(e.pointerId); }catch(_){}
  });

  function step(){
    ctx.clearRect(0,0,canvas.clientWidth,canvas.clientHeight);

    // 畫出重力井背景
    const grd = ctx.createRadialGradient(center.x,center.y,10,center.x,center.y,200);
    grd.addColorStop(0,"rgba(165,214,138,.35)");
    grd.addColorStop(1,"rgba(15,23,42,1)");
    ctx.fillStyle = grd;
    ctx.fillRect(0,0,canvas.clientWidth,canvas.clientHeight);

    // 畫等勢線
    ctx.strokeStyle = "rgba(15,23,42,.8)";
    ctx.lineWidth = 1;
    for(let r=40;r<220;r+=30){
      ctx.beginPath();
      ctx.arc(center.x,center.y,r,0,Math.PI*2);
      ctx.stroke();
    }

    if(!dragging){
      const dx = center.x - ball.x;
      const dy = center.y - ball.y;
      const dist = Math.hypot(dx,dy) || 1;
      const strength = 80 / (dist*dist);
      ball.vx += (dx/dist) * strength;
      ball.vy += (dy/dist) * strength;
      ball.vx *= 0.99;
      ball.vy *= 0.99;
      ball.x += ball.vx;
      ball.y += ball.vy;
    }

    // 畫小球
    ctx.beginPath();
    ctx.fillStyle = "#e5f7cc";
    ctx.arc(ball.x,ball.y,10,0,Math.PI*2);
    ctx.fill();
    ctx.strokeStyle = "#020617";
    ctx.lineWidth = 2;
    ctx.stroke();

    requestAnimationFrame(step);
  }
  step();
})();
</script>
