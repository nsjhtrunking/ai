<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Physics Lab 小實驗</title>
  <style>
    :root {
      --bg:#050608;
      --panel:#10141b;
      --muted:#a0a4ad;
      --text:#e5e7eb;
      --brand:#a5d68a;
      --brand-2:#8fc36f;
      --accent:#a5d68a;
    }
    body {
      margin:0;
      min-height:100vh;
      font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Noto Sans TC",sans-serif;
      background:
        radial-gradient(1200px 500px at 80% -50%, rgba(165,214,138,.22), transparent 60%),
        radial-gradient(900px 450px at -10% 0%, rgba(148,163,184,.18), transparent 60%),
        var(--bg);
      color:var(--text);
      display:flex;
      align-items:center;
      justify-content:center;
      padding:24px;
      box-sizing:border-box;
    }
    .shell {
      width:100%;
      max-width:1100px;
      background:linear-gradient(180deg,rgba(15,23,42,.96),rgba(3,7,18,.98));
      border-radius:24px;
      border:1px solid rgba(255,255,255,.08);
      box-shadow:0 22px 50px rgba(0,0,0,.7);
      padding:22px 22px 18px;
      display:flex;
      flex-direction:column;
      gap:18px;
    }
    header {
      display:flex;
      flex-wrap:wrap;
      gap:12px;
      justify-content:space-between;
      align-items:baseline;
    }
    h1 {
      margin:0;
      font-size:clamp(22px,3vw,26px);
      letter-spacing:.03em;
    }
    .tagline {
      margin:0;
      font-size:14px;
      color:var(--muted);
    }
    .badge {
      padding:4px 10px;
      border-radius:999px;
      border:1px solid rgba(165,214,138,.6);
      color:var(--accent);
      font-size:11px;
      text-transform:uppercase;
      letter-spacing:.14em;
      white-space:nowrap;
    }
    main {
      background:#050814;
      border-radius:18px;
      border:1px solid rgba(148,163,184,.22);
      padding:16px;
      display:grid;
      gap:16px;
    }
    @media(min-width:900px){
      main {
        grid-template-columns: minmax(0,1.2fr) minmax(0,1fr);
      }
    }
    .panel-title {
      font-size:15px;
      font-weight:600;
      margin-bottom:6px;
      color:#e5e7eb;
    }
    .panel-desc {
      font-size:13px;
      color:var(--muted);
      margin-bottom:10px;
    }
    .back-link {
      text-align:right;
      font-size:12px;
      color:var(--muted);
    }
    .back-link a {
      color:var(--accent);
      text-decoration:none;
    }
    .back-link a:hover {
      text-decoration:underline;
    }
    .pill {
      display:inline-flex;
      align-items:center;
      gap:6px;
      padding:4px 8px;
      border-radius:999px;
      border:1px solid rgba(148,163,184,.4);
      font-size:11px;
      color:var(--muted);
      margin-right:6px;
      margin-bottom:4px;
    }
  </style>
</head>
<body>
<div class="shell">
  <header>
    <div>
      <h1>Physics Lab 小實驗</h1>
      <p class="tagline">收集一些輕量級的互動物理小工具。</p>
    </div>
    <div class="badge">JS · Physics</div>
  </header>
  <main>

    <section>
      <div class="panel-title">水平拋射示意</div>
      <p class="panel-desc">
        調整初速度，可以看到小球的拋物線軌跡如何改變。
        這裡假設只受重力，加上簡單的阻尼，方便在課堂上做質感較好的說明。
      </p>
      <div style="display:flex;flex-direction:column;gap:10px;">
        <canvas id="projCanvas" style="width:100%;max-width:520px;height:260px;background:#020617;border-radius:12px;border:1px solid rgba(148,163,184,.4);"></canvas>
        <label style="font-size:13px;color:var(--muted);">
          初速度 (m/s)
          <input id="v0Range" type="range" min="5" max="35" value="18" style="width:100%;">
        </label>
      </div>
    </section>
    <section>
      <div class="panel-title">延伸活動</div>
      <p class="panel-desc">
        學生可以先畫出「預測軌跡」，再對照模擬結果，討論誤差從哪裡來。
      </p>
      <ul style="font-size:13px;color:var(--muted);padding-left:20px;line-height:1.7;">
        <li>增加不同重力加速度（模擬月球 / 火星）。</li>
        <li>加上空氣阻力，觀察與理想模型差異。</li>
        <li>搭配實際拋球錄影，用 Tracker 或自製工具比對。</li>
      </ul>
      <div>
        <span class="pill">拋體運動</span>
        <span class="pill">物理教學</span>
      </div>
    </section>

  </main>
  <div class="back-link">
    ⬅︎ <a href="../index.html">回入口 LAB ENTRANCE</a>
  </div>
</div>
</body>
</html>

<script>
(function(){
  const canvas = document.getElementById("projCanvas");
  const slider = document.getElementById("v0Range");
  if(!canvas || !slider) return;
  const ctx = canvas.getContext("2d");

  function resize(){
    const r = canvas.getBoundingClientRect();
    canvas.width = r.width * window.devicePixelRatio;
    canvas.height = r.height * window.devicePixelRatio;
    ctx.setTransform(window.devicePixelRatio,0,0,window.devicePixelRatio,0,0);
  }
  resize();
  window.addEventListener("resize", resize);

  let points = [];
  let t = 0;
  const g = 9.8;
  const scale = 6; // 像素 / m

  function reset(){
    points = [];
    t = 0;
  }
  slider.addEventListener("input", reset);

  function step(){
    const w = canvas.clientWidth;
    const h = canvas.clientHeight;
    ctx.clearRect(0,0,w,h);

    // 地面
    ctx.fillStyle = "#020617";
    ctx.fillRect(0,0,w,h);
    ctx.fillStyle = "rgba(15,23,42,1)";
    ctx.fillRect(0,h-32,w,32);
    ctx.strokeStyle = "rgba(148,163,184,.4)";
    ctx.beginPath();
    ctx.moveTo(0,h-32);
    ctx.lineTo(w,h-32);
    ctx.stroke();

    const v0 = Number(slider.value);
    const x0 = 40;
    const y0 = h-40;

    // 更新一個點
    const dt = 0.03;
    t += dt;
    const x = x0 + v0 * t * scale * 0.25;
    const y = y0 - (v0 * t * Math.sin(0) - 0.5 * g * t * t) * scale * 0.25;
    if(y < h-40){
      points.push({x,y});
    }

    // 畫軌跡
    ctx.strokeStyle = "#a5d68a";
    ctx.lineWidth = 2;
    ctx.beginPath();
    for(let i=0;i<points.length;i++){
      const p = points[i];
      if(i===0) ctx.moveTo(p.x,p.y);
      else ctx.lineTo(p.x,p.y);
    }
    ctx.stroke();

    // 畫小球
    const last = points[points.length-1] || {x:x0,y:y0};
    ctx.beginPath();
    ctx.arc(last.x,last.y,8,0,Math.PI*2);
    ctx.fillStyle = "#e5f7cc";
    ctx.fill();
    ctx.lineWidth = 2;
    ctx.strokeStyle = "#020617";
    ctx.stroke();

    // 畫文字
    ctx.fillStyle = "#a0a4ad";
    ctx.font = "12px system-ui";
    ctx.fillText("v₀ ≈ " + v0.toFixed(1) + " m/s", x0, 20);

    if(last.y >= h-40 && points.length>0){
      // 落地後停住軌跡，不再新增點
    }else{
      requestAnimationFrame(step);
    }
  }
  reset();
  step();
})();
</script>
