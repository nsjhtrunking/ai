<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>注音符號互動練習遊戲</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <!-- Babel (for JSX) -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <!-- Lucide Icons (Standalone) -->
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700;900&display=swap');
        body { font-family: 'Noto Sans TC', sans-serif; }
        /* 自定義動畫 */
        @keyframes bounce-slow {
            0%, 100% { transform: translateY(-5%); }
            50% { transform: translateY(5%); }
        }
        .animate-bounce-slow { animation: bounce-slow 3s infinite; }
    </style>
</head>
<body class="bg-slate-100">
    <div id="root"></div>

    <script type="text/babel">
        // 取得 React hooks
        const { useState, useEffect } = React;
        
        // Lucide Icons 元件封裝 (適配 CDN 環境)
        const IconWrapper = ({ name, size = 24, className, ...props }) => {
            // 使用 lucide 全域變數生成 SVG
            const iconRef = React.useRef(null);
            
            React.useEffect(() => {
                if (window.lucide && iconRef.current) {
                    const attrs = {
                        width: size,
                        height: size,
                        class: className,
                        ...props
                    };
                    // 簡單的圖示對應，如果名稱不匹配會顯示預設
                    const iconName = name.replace(/([A-Z])/g, '-$1').toLowerCase().replace(/^-/, '');
                    const svg = window.lucide.icons[iconName]; // 嘗試直接獲取
                    
                    if (iconRef.current) {
                        iconRef.current.innerHTML = ''; // 清空
                        const i = document.createElement('i');
                        i.setAttribute('data-lucide', iconName);
                        // 將 props 轉為屬性
                        Object.entries(attrs).forEach(([k, v]) => i.setAttribute(k, v));
                        iconRef.current.appendChild(i);
                        window.lucide.createIcons({
                            root: iconRef.current,
                            nameAttr: 'data-lucide',
                            attrs: attrs
                        });
                    }
                }
            }, [name, size, className]);

            return <span ref={iconRef} className="inline-flex items-center justify-center" />;
        };

        // 為了方便使用，建立對應的圖示元件
        const Home = (props) => <IconWrapper name="Home" {...props} />;
        const Play = (props) => <IconWrapper name="Play" {...props} />;
        const Volume2 = (props) => <IconWrapper name="Volume2" {...props} />;
        const RefreshCcw = (props) => <IconWrapper name="RefreshCcw" {...props} />;
        const Trophy = (props) => <IconWrapper name="Trophy" {...props} />;
        const Star = (props) => <IconWrapper name="Star" {...props} />;
        const ArrowRight = (props) => <IconWrapper name="ArrowRight" {...props} />;
        const CheckCircle = (props) => <IconWrapper name="CheckCircle" {...props} />;
        const XCircle = (props) => <IconWrapper name="XCircle" {...props} />;
        const BookOpen = (props) => <IconWrapper name="BookOpen" {...props} />;
        const Smile = (props) => <IconWrapper name="Smile" {...props} />;
        const Coins = (props) => <IconWrapper name="Coins" {...props} />;
        const Dices = (props) => <IconWrapper name="Dices" {...props} />;
        const Music = (props) => <IconWrapper name="Music" {...props} />;
        const Eye = (props) => <IconWrapper name="Eye" {...props} />;
        const Sparkles = (props) => <IconWrapper name="Sparkles" {...props} />;


        // --- 資料庫 ---
        const ZHUYIN_DATA = [
            { char: 'ㄅ', type: 'initial', word: '爸爸', category: '聲母' },
            { char: 'ㄆ', type: 'initial', word: '葡萄', category: '聲母' },
            { char: 'ㄇ', type: 'initial', word: '媽媽', category: '聲母' },
            { char: 'ㄈ', type: 'initial', word: '飛機', category: '聲母' },
            { char: 'ㄉ', type: 'initial', word: '弟弟', category: '聲母' },
            { char: 'ㄊ', type: 'initial', word: '兔子', category: '聲母' },
            { char: 'ㄋ', type: 'initial', word: '牛奶', category: '聲母' },
            { char: 'ㄌ', type: 'initial', word: '快樂', category: '聲母' },
            { char: 'ㄍ', type: 'initial', word: '哥哥', category: '聲母' },
            { char: 'ㄎ', type: 'initial', word: '考卷', category: '聲母' },
            { char: 'ㄏ', type: 'initial', word: '喝水', category: '聲母' },
            { char: 'ㄐ', type: 'initial', word: '機器', category: '聲母' },
            { char: 'ㄑ', type: 'initial', word: '氣球', category: '聲母' },
            { char: 'ㄒ', type: 'initial', word: '西瓜', category: '聲母' },
            { char: 'ㄓ', type: 'initial', word: '蜘蛛', category: '聲母' },
            { char: 'ㄔ', type: 'initial', word: '吃飯', category: '聲母' },
            { char: 'ㄕ', type: 'initial', word: '老師', category: '聲母' },
            { char: 'ㄖ', type: 'initial', word: '日記', category: '聲母' },
            { char: 'ㄚ', type: 'final', word: '阿姨', category: '韻母' },
            { char: 'ㄛ', type: 'final', word: '喔', category: '韻母' },
            { char: 'ㄜ', type: 'final', word: '鵝', category: '韻母' },
            { char: 'ㄧ', type: 'medial', word: '衣服', category: '介音' },
            { char: 'ㄨ', type: 'medial', word: '烏龜', category: '介音' },
            { char: 'ㄩ', type: 'medial', word: '下雨', category: '介音' },
            { char: 'ㄧㄚ', type: 'compound', word: '鴨子', category: '結合韻' },
            { char: 'ㄧㄝ', type: 'compound', word: '爺爺', category: '結合韻' },
            { char: 'ㄧㄠ', type: 'compound', word: '藥', category: '結合韻' },
            { char: 'ㄧㄡ', type: 'compound', word: '遊樂園', category: '結合韻' },
            { char: 'ㄧㄢ', type: 'compound', word: '眼睛', category: '結合韻' },
            { char: 'ㄧㄤ', type: 'compound', word: '太陽', category: '結合韻' },
            { char: 'ㄨㄚ', type: 'compound', word: '青蛙', category: '結合韻' },
            { char: 'ㄨㄛ', type: 'compound', word: '我', category: '結合韻' },
            { char: 'ㄨㄞ', type: 'compound', word: '歪掉', category: '結合韻' },
            { char: 'ㄨㄟ', type: 'compound', word: '尾巴', category: '結合韻' },
            { char: 'ㄨㄢ', type: 'compound', word: '碗', category: '結合韻' },
            { char: 'ㄩㄝ', type: 'compound', word: '月亮', category: '結合韻' },
            { char: 'ㄩㄢ', type: 'compound', word: '公園', category: '結合韻' },
            { char: 'ㄩㄣ', type: 'compound', word: '白雲', category: '結合韻' },
        ];

        const shuffleArray = (array) => [...array].sort(() => Math.random() - 0.5);

        const speak = (text) => {
            if ('speechSynthesis' in window) {
                const utterance = new SpeechSynthesisUtterance(text);
                utterance.lang = 'zh-TW';
                utterance.rate = 0.9;
                window.speechSynthesis.cancel();
                window.speechSynthesis.speak(utterance);
            }
        };

        const Button = ({ onClick, children, variant = 'primary', className = "", disabled = false }) => {
            const variants = {
                primary: "bg-blue-500 hover:bg-blue-600 text-white shadow-[0_4px_0_rgb(29,78,216)] active:translate-y-1 active:shadow-none",
                success: "bg-green-500 hover:bg-green-600 text-white shadow-[0_4px_0_rgb(21,128,61)] active:translate-y-1 active:shadow-none",
                danger: "bg-red-500 hover:bg-red-600 text-white shadow-[0_4px_0_rgb(185,28,28)] active:translate-y-1 active:shadow-none",
                purple: "bg-purple-500 hover:bg-purple-600 text-white shadow-[0_4px_0_rgb(126,34,206)] active:translate-y-1 active:shadow-none",
                outline: "bg-white text-gray-700 border-2 border-gray-200 hover:bg-gray-50 active:scale-95",
            };
            return (
                <button 
                    onClick={onClick} 
                    disabled={disabled}
                    className={`py-3 px-6 rounded-xl font-bold transition-all transform flex items-center justify-center gap-2 ${variants[variant]} ${disabled ? 'opacity-50 cursor-not-allowed grayscale' : ''} ${className}`}
                >
                    {children}
                </button>
            );
        };

        const Card = ({ children, className = "" }) => (
            <div className={`bg-white rounded-2xl shadow-lg border-2 border-gray-100 p-6 ${className}`}>
                {children}
            </div>
        );

        const Banner = () => (
            <div className="w-full h-32 md:h-40 bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 flex items-center justify-center relative overflow-hidden shrink-0 shadow-md">
                <div className="absolute top-0 left-0 w-full h-full opacity-10">
                    <div className="absolute top-[-20%] left-[-10%] w-64 h-64 bg-white rounded-full blur-3xl"></div>
                    <div className="absolute bottom-[-20%] right-[-10%] w-64 h-64 bg-yellow-300 rounded-full blur-3xl"></div>
                </div>
                <Star className="absolute top-4 left-6 md:left-12 text-yellow-300 w-8 h-8 md:w-12 md:h-12 rotate-12 animate-pulse" />
                <Sparkles className="absolute bottom-6 right-20 text-white/40 w-10 h-10 animate-bounce" />
                <BookOpen className="absolute top-6 right-6 md:right-12 text-white/30 w-8 h-8 md:w-14 md:h-14 -rotate-12" />
                <Music className="absolute bottom-4 left-24 text-pink-300/50 w-12 h-12 rotate-45" />
                <div className="z-10 text-center px-4">
                    <h1 className="text-2xl md:text-4xl font-black text-white drop-shadow-[0_2px_2px_rgba(0,0,0,0.3)] tracking-widest leading-tight">
                        注音符號互動練習<br className="md:hidden"/>遊戲設計
                    </h1>
                    <div className="mt-1 md:mt-2 h-1 w-24 mx-auto bg-white/50 rounded-full"></div>
                </div>
            </div>
        );

        // --- 遊戲邏輯元件 ---
        
        const PracticeGame = ({ mode, onBack }) => {
            const [gameState, setGameState] = useState('playing'); 
            const [currentQuestion, setCurrentQuestion] = useState(null);
            const [options, setOptions] = useState([]);
            const [score, setScore] = useState(0);
            const [questionCount, setQuestionCount] = useState(0);
            const [selectedOption, setSelectedOption] = useState(null);
            const [isCorrect, setIsCorrect] = useState(false);
            const TOTAL_QUESTIONS = 10;

            useEffect(() => {
                generateQuestion();
            }, []);

            const generateQuestion = () => {
                const target = ZHUYIN_DATA[Math.floor(Math.random() * ZHUYIN_DATA.length)];
                let distractors = ZHUYIN_DATA.filter(item => item.char !== target.char);
                distractors = shuffleArray(distractors).slice(0, 3);
                const allOptions = shuffleArray([target, ...distractors]);
                
                setCurrentQuestion(target);
                setOptions(allOptions);
                setSelectedOption(null);
                setGameState('playing');
                
                if (mode === 'audio') {
                    setTimeout(() => speak(target.word), 500);
                }
            };

            const handleAnswer = (option) => {
                if (gameState === 'feedback') return;
                
                setSelectedOption(option);
                const correct = option.char === currentQuestion.char;
                setIsCorrect(correct);
                
                if (correct) {
                    setScore(s => s + 10);
                    speak('答對了');
                } else {
                    speak('加油');
                }
                setGameState('feedback');
            };

            const nextQuestion = () => {
                if (questionCount >= TOTAL_QUESTIONS - 1) {
                    setGameState('end');
                } else {
                    setQuestionCount(c => c + 1);
                    generateQuestion();
                }
            };

            if (gameState === 'end') {
                return (
                    <div className="flex flex-col items-center justify-center h-full space-y-8 animate-in zoom-in">
                        <Trophy size={100} className="text-yellow-400 drop-shadow-lg" />
                        <h2 className="text-3xl font-bold text-gray-800">練習結束！</h2>
                        <div className="bg-white p-6 rounded-2xl shadow-sm text-center w-64 border-2 border-gray-100">
                            <div className="text-gray-400 text-sm uppercase font-bold">總得分</div>
                            <div className="text-5xl font-black text-blue-600">{score}</div>
                        </div>
                        <div className="flex gap-4">
                            <Button onClick={onBack} variant="outline">回選單</Button>
                            <Button onClick={() => { setScore(0); setQuestionCount(0); generateQuestion(); }}>再玩一次</Button>
                        </div>
                    </div>
                );
            }

            if (!currentQuestion) return <div>Loading...</div>;

            return (
                <div className="max-w-2xl mx-auto w-full h-full flex flex-col">
                    <div className="flex justify-between items-center mb-4 pt-2">
                        <button onClick={onBack} className="p-2 hover:bg-gray-100 rounded-full text-gray-500 transition-colors">
                            <Home size={24} />
                        </button>
                        <div className="flex items-center gap-2 bg-white px-4 py-1 rounded-full shadow-sm border">
                            <Star className="text-yellow-400 fill-current" size={16} />
                            <span className="font-bold text-gray-700">{score}</span>
                        </div>
                        <div className="text-gray-400 text-sm font-medium">
                            第 {questionCount + 1} / {TOTAL_QUESTIONS} 題
                        </div>
                    </div>

                    <Card className="flex-1 mb-4 flex flex-col items-center justify-center relative bg-gradient-to-b from-blue-50 to-white overflow-hidden">
                        {mode === 'visual' ? (
                            <div className="flex flex-col items-center animate-in zoom-in duration-300">
                                <span className="text-sm text-blue-400 font-bold tracking-widest uppercase mb-4 bg-blue-50 px-3 py-1 rounded-full">
                                    {currentQuestion.category}
                                </span>
                                <div className={`${currentQuestion.char.length > 1 ? 'text-7xl lg:text-8xl' : 'text-9xl'} font-black text-gray-800 transition-all select-none`}>
                                    {currentQuestion.char}
                                </div>
                            </div>
                        ) : (
                            <div className="flex flex-col items-center">
                                <button 
                                    onClick={() => speak(currentQuestion.word)}
                                    className="w-32 h-32 bg-purple-500 rounded-full flex items-center justify-center shadow-lg hover:scale-105 active:scale-95 transition-transform"
                                >
                                    <Volume2 size={48} className="text-white" />
                                </button>
                                <div className="mt-4 text-gray-400 font-medium">點擊聽聲音</div>
                            </div>
                        )}
                        
                        {gameState === 'feedback' && (
                            <div className="absolute inset-0 bg-white/95 flex flex-col items-center justify-center animate-in fade-in z-20 rounded-2xl">
                                {isCorrect ? <CheckCircle size={64} className="text-green-500 mb-2" /> : <XCircle size={64} className="text-red-500 mb-2" />}
                                <div className={`font-black mb-2 text-gray-800 ${currentQuestion.char.length > 1 ? 'text-5xl' : 'text-6xl'}`}>
                                    {currentQuestion.char}
                                </div>
                                <div className="text-3xl text-blue-600 mb-8 font-bold">{currentQuestion.word}</div>
                                <Button onClick={nextQuestion} variant={isCorrect ? "success" : "primary"}>
                                    下一題 <ArrowRight size={20} />
                                </Button>
                            </div>
                        )}
                    </Card>

                    <div className="grid grid-cols-2 gap-3 h-1/3 min-h-[160px]">
                        {options.map((opt, idx) => (
                            <Button
                                key={idx}
                                disabled={gameState === 'feedback'}
                                onClick={() => handleAnswer(opt)}
                                variant="outline"
                                className={`h-full flex flex-col transition-all ${
                                    gameState === 'feedback' && opt.char === currentQuestion.char ? '!bg-green-100 !border-green-300' : ''
                                } ${
                                    gameState === 'feedback' && selectedOption === opt && !isCorrect ? '!bg-red-100 !border-red-300' : ''
                                }`}
                            >
                                {mode === 'visual' ? (
                                    <span className="font-bold text-3xl text-gray-700">{opt.word}</span>
                                ) : (
                                    <span className={`font-black text-gray-700 ${opt.char.length > 1 ? 'text-5xl' : 'text-6xl'}`}>
                                        {opt.char}
                                    </span>
                                )}
                            </Button>
                        ))}
                    </div>
                </div>
            );
        };

        const MonopolyGame = ({ onBack }) => {
            const [playerPos, setPlayerPos] = useState(0);
            const [money, setMoney] = useState(200);
            const [turnState, setTurnState] = useState('idle');
            const [diceVal, setDiceVal] = useState(1);
            const [message, setMessage] = useState('請擲骰子！');
            const [quizData, setQuizData] = useState(null);
            const [showQuiz, setShowQuiz] = useState(false);

            const BOARD_MAP = [
                { type: 'start', label: '起點', color: 'bg-red-100 text-red-600' },
                { type: 'quiz', label: '?', color: 'bg-blue-50 text-blue-500' },
                { type: 'quiz', label: '?', color: 'bg-blue-50 text-blue-500' },
                { type: 'chance', label: '!', color: 'bg-yellow-50 text-yellow-500' },
                { type: 'quiz', label: '?', color: 'bg-blue-50 text-blue-500' },
                { type: 'quiz', label: '?', color: 'bg-blue-50 text-blue-500' },
                { type: 'chance', label: '!', color: 'bg-yellow-50 text-yellow-500' },
                { type: 'quiz', label: '?', color: 'bg-blue-50 text-blue-500' },
                { type: 'quiz', label: '?', color: 'bg-blue-50 text-blue-500' },
                { type: 'chance', label: '!', color: 'bg-yellow-50 text-yellow-500' },
                { type: 'quiz', label: '?', color: 'bg-blue-50 text-blue-500' },
                { type: 'quiz', label: '?', color: 'bg-blue-50 text-blue-500' },
            ];

            const getGridPos = (idx) => {
                if (idx <= 3) return { col: idx + 1, row: 1 };
                if (idx === 4) return { col: 4, row: 2 };
                if (idx === 5) return { col: 4, row: 3 }; 
                if (idx >= 6 && idx <= 9) return { col: 4 - (idx - 6), row: 3 };
                return { col: 1, row: 3 - (idx - 10) };
            };

            const rollDice = () => {
                setTurnState('rolling');
                speak('擲骰子');
                let rolls = 0;
                const interval = setInterval(() => {
                    setDiceVal(Math.floor(Math.random() * 6) + 1);
                    rolls++;
                    if (rolls > 8) {
                        clearInterval(interval);
                        const final = Math.floor(Math.random() * 6) + 1;
                        setDiceVal(final);
                        movePlayer(final);
                    }
                }, 100);
            };

            const movePlayer = (steps) => {
                setTurnState('moving');
                let currentSteps = 0;
                const moveTimer = setInterval(() => {
                    setPlayerPos(prev => {
                        const next = (prev + 1) % 12;
                        if (next === 0 && currentSteps < steps) {
                            setMoney(m => m + 100);
                            setMessage('經過起點 +$100');
                        }
                        return next;
                    });
                    currentSteps++;
                    if (currentSteps >= steps) {
                        clearInterval(moveTimer);
                        setTimeout(handleLand, 500);
                    }
                }, 300);
            };

            const handleLand = () => {
                setPlayerPos(pos => {
                    const type = BOARD_MAP[pos].type;
                    if (type === 'quiz') startQuiz();
                    else if (type === 'chance') triggerChance();
                    else setTurnState('idle');
                    return pos;
                });
            };

            const startQuiz = () => {
                const target = ZHUYIN_DATA[Math.floor(Math.random() * ZHUYIN_DATA.length)];
                let distractors = ZHUYIN_DATA.filter(item => item.char !== target.char);
                distractors = shuffleArray(distractors).slice(0, 3);
                setQuizData({ target, options: shuffleArray([target, ...distractors]) });
                setShowQuiz(true);
                setTurnState('quiz');
                speak(`請問，${target.word}的注音是？`);
            };

            const handleQuizAnswer = (char) => {
                if (char === quizData.target.char) {
                    setMoney(m => m + 50);
                    speak('答對了');
                    setMessage('答對 +$50');
                } else {
                    speak('答錯了');
                    setMessage('答錯了');
                }
                setShowQuiz(false);
                setTurnState('idle');
            };

            const triggerChance = () => {
                const r = Math.random();
                if (r > 0.5) {
                    setMoney(m => m + 50);
                    setMessage('撿到錢 +$50');
                    speak('好運氣');
                } else {
                    setMoney(m => Math.max(0, m - 30));
                    setMessage('買零食 -$30');
                    speak('花錢了');
                }
                setTurnState('idle');
            };

            return (
                <div className="h-full flex flex-col relative">
                    <div className="flex justify-between items-center mb-4 pt-2 bg-white/80 p-3 rounded-xl shadow-sm border">
                        <button onClick={onBack} className="p-2 hover:bg-gray-100 rounded-full text-gray-500">
                            <Home size={20} />
                        </button>
                        <div className="flex items-center gap-2">
                            <Coins className="text-yellow-500" />
                            <span className="font-black text-xl">${money}</span>
                        </div>
                    </div>

                    <div className="flex-1 bg-white rounded-2xl shadow-lg border-4 border-blue-100 relative overflow-hidden p-2">
                        <div className="absolute inset-[25%] flex flex-col items-center justify-center z-10 text-center pointer-events-none">
                            <div className="pointer-events-auto">
                                <div className="text-sm font-bold text-blue-500 mb-2 min-h-[1.5rem]">{message}</div>
                                <button 
                                    onClick={rollDice}
                                    disabled={turnState !== 'idle'} 
                                    className="bg-white border-2 border-gray-200 rounded-xl p-3 shadow-md hover:scale-105 active:scale-95 transition-transform"
                                >
                                    <div className="grid grid-cols-2 gap-1 w-12 h-12">
                                        {Array(diceVal).fill(0).map((_, i) => (
                                            <div key={i} className="bg-black rounded-full w-2.5 h-2.5 mx-auto"></div>
                                        ))}
                                    </div>
                                </button>
                            </div>
                        </div>

                        {BOARD_MAP.map((sq, idx) => {
                            const pos = getGridPos(idx);
                            const isPlayer = playerPos === idx;
                            return (
                                <div 
                                    key={idx}
                                    className={`absolute w-[22%] h-[28%] rounded-lg border-2 border-gray-100 flex items-center justify-center flex-col ${sq.color} shadow-sm transition-all`}
                                    style={{
                                        left: `${(pos.col - 1) * 25 + 2}%`,
                                        top: `${(pos.row - 1) * 33 + 2}%`,
                                    }}
                                >
                                    <span className="font-black text-xl select-none">{sq.label}</span>
                                    {isPlayer && (
                                        <div className="absolute -top-4 bg-white rounded-full p-1 shadow-md animate-bounce">
                                            <Smile className="text-blue-600" fill="currentColor" size={28} />
                                        </div>
                                    )}
                                </div>
                            )
                        })}
                    </div>

                    {showQuiz && (
                        <div className="absolute inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4">
                            <div className="bg-white rounded-2xl p-6 w-full max-w-sm shadow-2xl animate-in zoom-in border-4 border-blue-200">
                                <h3 className="text-xl font-bold text-center mb-6 text-gray-700">
                                    <span className="text-blue-600 text-3xl mx-2 border-b-4 border-blue-200">{quizData.target.word}</span> 的注音？
                                </h3>
                                <div className="grid grid-cols-2 gap-3">
                                    {quizData.options.map((opt, i) => (
                                        <button 
                                            key={i}
                                            onClick={() => handleQuizAnswer(opt.char)}
                                            className="bg-white border-2 border-gray-200 hover:bg-blue-50 hover:border-blue-400 rounded-xl py-6 shadow-sm active:scale-95 transition-all flex items-center justify-center"
                                        >
                                            <span className={`font-black text-gray-800 ${opt.char.length > 1 ? 'text-3xl' : 'text-4xl'}`}>
                                                {opt.char}
                                            </span>
                                        </button>
                                    ))}
                                </div>
                            </div>
                        </div>
                    )}
                </div>
            );
        };

        const ZhuyinWorld = () => {
            const [currentView, setCurrentView] = useState('menu');

            const MenuScreen = () => (
                <div className="flex flex-col items-center justify-center h-full space-y-6 animate-in slide-in-from-bottom-4 py-8">
                    <p className="text-gray-500 font-medium text-lg">請選擇一個遊戲模式</p>

                    <div className="grid grid-cols-1 md:grid-cols-3 gap-6 w-full max-w-4xl px-4">
                        <button 
                            onClick={() => setCurrentView('visual')}
                            className="bg-white hover:bg-orange-50 border-b-4 border-orange-200 p-6 rounded-2xl shadow-sm hover:shadow-md transition-all group text-left flex flex-col items-center md:items-start"
                        >
                            <div className="w-16 h-16 bg-orange-100 rounded-full flex items-center justify-center mb-4 group-hover:scale-110 transition-transform">
                                <Eye className="text-orange-500" size={32} />
                            </div>
                            <h3 className="text-2xl font-black text-gray-800">認字挑戰</h3>
                            <p className="text-sm text-gray-400 mt-1">看注音，選國字</p>
                        </button>

                        <button 
                            onClick={() => setCurrentView('audio')}
                            className="bg-white hover:bg-purple-50 border-b-4 border-purple-200 p-6 rounded-2xl shadow-sm hover:shadow-md transition-all group text-left flex flex-col items-center md:items-start"
                        >
                            <div className="w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center mb-4 group-hover:scale-110 transition-transform">
                                <Music className="text-purple-500" size={32} />
                            </div>
                            <h3 className="text-2xl font-black text-gray-800">聽音辨位</h3>
                            <p className="text-sm text-gray-400 mt-1">聽發音，選注音</p>
                        </button>

                        <button 
                            onClick={() => setCurrentView('monopoly')}
                            className="bg-white hover:bg-green-50 border-b-4 border-green-200 p-6 rounded-2xl shadow-sm hover:shadow-md transition-all group text-left flex flex-col items-center md:items-start"
                        >
                            <div className="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mb-4 group-hover:scale-110 transition-transform">
                                <Dices className="text-green-500" size={32} />
                            </div>
                            <h3 className="text-2xl font-black text-gray-800">注音大富翁</h3>
                            <p className="text-sm text-gray-400 mt-1">擲骰子冒險去！</p>
                        </button>
                    </div>
                </div>
            );

            return (
                <div className="min-h-screen bg-slate-100 p-4 font-sans select-none flex items-center justify-center">
                    <div className="w-full max-w-4xl bg-white/60 backdrop-blur-xl h-[800px] max-h-[90vh] rounded-3xl shadow-2xl overflow-hidden border border-white/50 relative flex flex-col">
                        <div className="absolute top-0 left-0 w-64 h-64 bg-blue-200 rounded-full mix-blend-multiply filter blur-3xl opacity-20 -translate-x-1/2 -translate-y-1/2 pointer-events-none"></div>
                        <div className="absolute bottom-0 right-0 w-64 h-64 bg-purple-200 rounded-full mix-blend-multiply filter blur-3xl opacity-20 translate-x-1/2 translate-y-1/2 pointer-events-none"></div>
                        
                        <Banner />

                        <div className="flex-1 relative z-10 overflow-y-auto bg-white/30">
                            <div className="p-6 h-full">
                                {currentView === 'menu' && <MenuScreen />}
                                {currentView === 'visual' && <PracticeGame mode="visual" onBack={() => setCurrentView('menu')} />}
                                {currentView === 'audio' && <PracticeGame mode="audio" onBack={() => setCurrentView('menu')} />}
                                {currentView === 'monopoly' && <MonopolyGame onBack={() => setCurrentView('menu')} />}
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<ZhuyinWorld />);
    </script>
</body>
</html>

